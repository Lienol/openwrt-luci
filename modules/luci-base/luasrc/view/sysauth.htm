<%#
 Copyright 2008 Steven Barth <steven@midlink.org>
 Copyright 2008-2012 Jo-Philipp Wich <jow@openwrt.org>
 Licensed to the public under the Apache License 2.0.
-%>

<%+header%>
<%
local default_username = "root"
local default_username = duser or default_username
local last_username = luci.http.formvalue("luci_username")
default_username = last_username or default_username
-%>

<form method="post" action="<%=pcdata(luci.http.getenv("REQUEST_URI"))%>">
	<%- if fuser then %>
	<div class="errorbox"><%:Invalid username and/or password! Please try again.%></div>
	<% end -%>

	<div class="cbi-map">
		<h2 name="content"><%:Authorization Required%></h2>
		<div class="cbi-map-descr">
			<%:Please enter your username and password.%>
		</div>
		<fieldset class="cbi-section"><fieldset class="cbi-section-node">
			<div class="cbi-value">
				<label class="cbi-value-title"><%:Username%></label>
				<div class="cbi-value-field">
					<input class="cbi-input-user" type="text" name="luci_username" value="<%=default_username%>" />
				</div>
			</div>
			<div class="cbi-value cbi-value-last">
				<label class="cbi-value-title"><%:Password%></label>
				<div class="cbi-value-field">
					<input class="cbi-input-password" type="password" name="luci_password" />
				</div>
			</div>
		</fieldset></fieldset>
	</div>

	<div>
		<input type="submit" value="<%:Login%>" class="cbi-button cbi-button-apply" />
		<input type="reset" value="<%:Reset%>" class="cbi-button cbi-button-reset" />
	</div>
</form>
<script type="text/javascript">//<![CDATA[
	var input_username = document.getElementsByName('luci_username')[0];
	var input_password = document.getElementsByName('luci_password')[0];
	if (input_password) {
		input_password.focus();
	}
	if (input_username.value == "") {
		input_username.focus();
	}
//]]></script>

<%+footer%>
